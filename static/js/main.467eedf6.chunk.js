(this["webpackJsonpis3106-app-new"]=this["webpackJsonpis3106-app-new"]||[]).push([[0],{14:function(e,n,t){},15:function(e,n,t){},17:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t.n(c),r=t(7),i=t.n(r),d=(t(14),t(15),t(9)),s=t(8),u=t(4),a={getNotes:function(){return fetch("mock-notes.json")}},l=(t(6),t(0));var j=function(e){var n=e.editMode,t=void 0!==n&&n,o=e.value,r=void 0===o?"":o,i=e.id,d=void 0===i?0:i,s=e.onDone,a=e.onCancelEdit,j=Object(c.useRef)(),f=Object(c.useState)(r),b=Object(u.a)(f,2),v=b[0],O=b[1];Object(c.useEffect)((function(){j.current.focus(),j.current.select()}),[]);var h=t?Object(l.jsx)("div",{className:"note-form-cancel",children:Object(l.jsx)("button",{onClick:function(){return a(d)},children:"Cancel"})}):v.length>0?void 0:"",x=function(){var e="Add";return t&&(e="Confirm Edit"),Object(l.jsx)("div",{className:"note-form-add",children:Object(l.jsx)("button",{onClick:function(){s({id:d,value:v}),O(r)},children:e})})}();return Object(l.jsxs)("div",{className:"note-form-container",children:[Object(l.jsx)("textarea",{className:"note-form",rows:"3",placeholder:"Enter note",ref:j,value:v,onChange:function(e){O(e.target.value)}}),h,x]})};var f=function(e){return Object(l.jsxs)("div",{className:"notes-entry",children:[Object(l.jsx)("div",{className:"notes-entry-body",children:e.value}),Object(l.jsxs)("div",{className:"notes-entry-action",children:[Object(l.jsx)("button",{onClick:function(n){return e.onEdit(e.id)},children:"edit"}),Object(l.jsx)("button",{onClick:function(n){return e.onDelete(e.id)},children:"delete"})]})]})};var b=function(e){var n=e.notes.map((function(n){return n.editMode?Object(l.jsx)(j,{id:n.id,value:n.value,editMode:n.editMode,onCancelEdit:function(n){return e.onEdit(n,!1)},onDone:e.onDone},n.id):Object(l.jsx)(f,{id:n.id,value:n.value,onEdit:function(n){return e.onEdit(n,!0)},onDelete:e.onDelete},n.id)}));return Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"List of notes:"}),Object(l.jsx)("div",{className:"notes-entry-container",children:n})]})};var v=function(){var e=Object(c.useState)({notes:[],currentId:0}),n=Object(u.a)(e,2),t=n[0],o=n[1];function r(e,n){var c=t.notes.map((function(t){return t.id===e&&(t.editMode=n),t}));o((function(e){return{currentId:e.currentId,notes:c}}))}function i(e){console.log("###in handleAddEdit ",e);var n=t.currentId,c=t.notes;if(0===e.id){if(""===e.value.trim())return;e.id=n+1,o({currentId:e.id,notes:[].concat(Object(d.a)(c),[e])})}else{if(""===e.value.trim())return void r(e.id,!1);var i=c.map((function(n){return n.id===e.id?(e.editMode=!1,e):n}));o((function(e){return{currentId:e.currentId,notes:i}}))}}Object(c.useEffect)((function(){a.getNotes().then((function(e){return e.json()})).then((function(e){var n,t=-1,c=Object(s.a)(e);try{for(c.s();!(n=c.n()).done;){var r=n.value;r.id>t&&(t=r.id)}}catch(i){c.e(i)}finally{c.f()}o({notes:e,currentId:t})}))}),[]);var f=t.notes;return Object(l.jsxs)("div",{className:"note-container",children:[Object(l.jsx)(j,{onDone:i}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)(b,{notes:f,onEdit:r,onDelete:function(e){var n=t.notes.filter((function(n){return n.id!==e}));o((function(e){return{currentId:e.currentId,notes:n}})),console.log("###updatedNotes: ",n)},onDone:i})]})};var O=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("div",{className:"App-header",children:Object(l.jsx)("h2",{children:"Welcome to IS3106 Note App"})}),Object(l.jsx)("br",{}),Object(l.jsx)("br",{}),Object(l.jsx)(v,{})]})},h=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,18)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),c(e),o(e),r(e),i(e)}))};i.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(O,{})}),document.getElementById("root")),h()},6:function(e,n,t){}},[[17,1,2]]]);
//# sourceMappingURL=main.467eedf6.chunk.js.map